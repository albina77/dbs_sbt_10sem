# сочинение на тему: знакомство с mongoDB

## установка mongoDB

Начала с Homebrew   
Прекрасный удобный менеджер сделал все за меня. За иконки с пивом отдельный лайк

![1](1.png)

## Запуск docker

Запуллила последнюю версию mongo image и подняла контейнер (без yaml, а кто осудит?)  

![2](2.png)

3-х попыток мне хватило, чтобы понять, как запустить mongo

![3](3.png)

Создались какие-то целых 2 volume, я на них надеюсь

![4](4.png)

## Скачиваем Compass и let's go

Скачала Compass и подключила к локальному хосту

![5](5.png)

Теперь загрузим базу данных. Инфу взяла из [лондонских данных](https://data.london.gov.uk/dataset/public-transport-journeys-type-transport), раз уж Яндекс.Такси долго на mongo сидели, то почему бы и нам данные по общественному транспорту в Лондоне не подгрузить

![6](6.png)

## .insertOne(), .find()

Попробуем вставить документ: скопируем имеющийся, поменяем `_id` и одно поле

![7](7.png)

Получилось! А что, если не менять `_id`?

![8](8.png)

Не вышло :с    
Поменяем _только_ `_id` и воспользуемся `find()` 

![9](9.png)

## .insertMany()

Попробуем вставить несколько документов, при этом в одном из них уберем часть полей

![10](10.png)

## .updateMany()

`.updateOne()` в Compass довольно скучный и удобный, давайте заменим сразу много с фильтром

![11](11.png)

## .deleteOne(), .deleteMany()

Попробуем поудалять: один удалить вообще скучно, а вот несколько по фильтру с регуляркой - уже интереснее

![12](12.png)

![13](13.png)

## index

Кажется, нашей базы в 150 измерений недостаточно, чтобы померить эффективность   
Накинем [еще](https://www.kaggle.com/datasets/seanangelonathanael/bank-target-marketing) данных

![14](14.png)

Сделаем `.find()`: `{ job: { $regex: "(?-i)c(?-i)" } }`   
Без индексов поиск работает за следующее время

![15](15.png)

Теперь накинем индекс по полю `job` с регулярным типом (`asc`)

![16](16.png)

Проверим время работы 

![17](17.png)

Вот это для меня осталось загадкой дыры... (Кстати, запрос на то, чтобы значение начиналось с определенной буквы, не отработал быстрее. Хотя по идее индекс - это про сортировку?)  


Но в мануале написано, что текстовые индексы подходят именно для текстовых запросов  
Меняем тип индекса и смотрим

![18](18.png)

На сим и закончим

## Выводы

MongoDB оказалась очень приятной базой, ну а GUI Compass ну так вообще мед, медятина...  
Но, наверное, реализуя промышленное решение, нужно вот эту ее готовность к любым экспериментам с данными усмирять  
Для локального использования -- отлично!


```python

```


```python

```
